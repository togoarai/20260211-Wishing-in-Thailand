<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026æ³°åœ‹è¨±é¡˜æ±  v2.1.3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .product-img { aspect-ratio: 1 / 1; object-fit: cover; }
        .truncate-2-lines { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    </style>
</head>
<body class="bg-gray-100 p-5 text-left">

    <div class="max-w-5xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden p-6 text-left">
        <h1 class="text-3xl font-bold text-gray-800 mb-2 text-center">ğŸ›’ 2026æ³°åœ‹è¨±é¡˜æ± </h1>
        <p class="text-gray-500 mb-8 text-center font-medium">è«‹ç¢ºèªå·²é—œé–‰ Google è¡¨å–®çš„ã€Œå›è¦†é©—è­‰ã€è¨­å®š</p>

        <div id="product-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10 text-left"></div>

        <div class="bg-blue-50 p-5 rounded-xl border border-blue-100 shadow-inner">
            <h2 class="text-xl font-semibold mb-4 text-blue-800 flex justify-between">
                <span>æ‚¨çš„è³¼ç‰©æ¸…å–®</span>
                <span id="cart-count" class="text-sm bg-blue-500 text-white px-2 py-1 rounded-full">0</span>
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm text-left">
                    <thead>
                        <tr class="border-b border-blue-200 text-blue-600">
                            <th class="py-2">å•†å“åç¨±</th>
                            <th class="py-2">å–®åƒ¹</th>
                            <th class="py-2 text-center">æ•¸é‡</th>
                            <th class="py-2 text-right">å°è¨ˆ</th>
                        </tr>
                    </thead>
                    <tbody id="cart-table-body" class="text-gray-700"></tbody>
                </table>
            </div>
            <div id="empty-msg" class="text-center py-8 text-gray-400 font-medium">è³¼ç‰©è»Šå…§å°šç„¡å•†å“</div>
            <div class="flex justify-between items-center pt-4 border-t border-blue-200 mt-4 font-bold">
                <span class="text-lg text-gray-800 text-left">æ‡‰ä»˜ç¸½é¡ï¼š</span>
                <span class="text-3xl text-red-600">$<span id="total-price">0</span></span>
            </div>
        </div>

        <div class="mt-8 border-t pt-6 text-left">
            <div class="mb-4">
                <label class="block text-sm font-bold text-gray-700 mb-2">æ”¶ä»¶äººå§“å</label>
                <input type="text" id="user-name" placeholder="è«‹è¼¸å…¥å§“å" class="w-full border-2 border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none shadow-sm">
            </div>
            <div class="mb-6">
                <label class="block text-sm font-bold text-gray-700 mb-2">è¨±é¡˜æ±  / å‚™è¨»</label>
                <textarea id="wish-list" rows="3" placeholder="è‹¥æœ‰æ¸…å–®å¤–çš„å•†å“è«‹åœ¨æ­¤å¡«å¯«" class="w-full border-2 border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none shadow-sm"></textarea>
            </div>
            <button onclick="submitOrder()" class="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl hover:bg-indigo-700 shadow-lg text-lg">
                ç¢ºèªé€å‡ºè¨‚å–®
            </button>
        </div>
    </div>

    <script>
        // ... (products é™£åˆ—ç¶­æŒä¸è®Š) ...
        const products = [
            { name: '001-èœ‚è† å™´éœ§ propoliz mouth spray', price: 50, entryId: 'entry.926724098', img: 'https://i.ebayimg.com/images/g/bCgAAOSwFzNltMDq/s-l1600.webp' },
            { name: '002-è›‡ç‰Œå™´éœ§ ç«ç‘° à¸•à¸£à¸²à¸‡à¸¹ à¸›à¸£à¸´à¸à¸¥à¸µà¹ˆà¸®à¸µà¸— à¸„à¸¹à¸¥à¸¥à¸´à¹ˆà¸‡ à¸¡à¸´à¸ªà¸—à¹Œ à¸„à¸¥à¸²à¸ªæ–¯à¸´à¸', price: 50, entryId: 'entry.417431954', img: 'https://www.jatujakmall.com/content/images/thumbs/0042149_snake-brand-prickly-heat-classic-cooling-body-spray-50-ml_550.jpeg' },
            { name: '003-é˜²èšŠæ¶² æŸ‘æ©˜ à¸‹à¸­à¸Ÿãƒ•ã‚§ãƒ« ã‚¹à¹€à¸›à¸£à¸¢à¹Œà¸à¸±à¸™à¸¢à¸¸à¸‡ à¸à¸¥à¸´à¹ˆà¸™à¹€à¸Ÿà¸£à¸Š', price: 50, entryId: 'entry.1801961741', img: 'https://thmappbkk.blob.core.windows.net/boots/2025/10/28/1279ffd0-eff9-4c46-b80f-8ccb2290702a_large.jpg' },
            { name: '014-é‚„é­‚æ¢… à¸šà¹Šà¸§à¸¢à¸„à¸·à¸™à¸Šà¸µà¸', price: 50, entryId: 'entry.2134589659', img: 'https://magmagbangkok.com/wp-content/uploads/2021/04/%E0%B8%9A%E0%B9%8A%E0%B8%A7%E0%B8%A2%E0%B8%84%E0%B8%B7%E0%B8%99%E0%B8%8A%E0%B8%B5%E0%B8%9E-186g.png' },
            // ... å…¶é¤˜ 56 å€‹å•†å“è«‹æŒ‰åŸæ¨£ä¿ç•™ ...
        ];

        let cart = {};

        function initProducts() {
            const container = document.getElementById('product-list');
            container.innerHTML = '';
            products.forEach(p => {
                const imgSrc = p.img || `https://placehold.co/400x400/e2e8f0/64748b?text=${p.name.substring(0,3)}`;
                container.innerHTML += `
                <div class="flex flex-col bg-white border rounded-xl shadow-sm hover:shadow-md transition overflow-hidden text-left">
                    <img src="${imgSrc}" alt="${p.name}" class="w-full product-img bg-gray-50">
                    <div class="p-4 flex flex-col justify-between flex-1">
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm leading-tight truncate-2-lines mb-2">${p.name}</h3>
                            <p class="text-red-500 font-extrabold text-lg">$${p.price}</p>
                        </div>
                        <button onclick="addToCart('${p.name}', ${p.price})" class="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-blue-700 transition">+ åŠ å…¥è³¼ç‰©è»Š</button>
                    </div>
                </div>`;
            });
        }

        function addToCart(name, price) {
            if (cart[name]) cart[name].quantity += 1;
            else cart[name] = { price, quantity: 1 };
            renderCart();
        }

        function renderCart() {
            const tbody = document.getElementById('cart-table-body');
            const emptyMsg = document.getElementById('empty-msg');
            tbody.innerHTML = '';
            let total = 0, count = 0;
            Object.keys(cart).forEach(name => {
                const item = cart[name];
                total += item.price * item.quantity;
                count += item.quantity;
                tbody.innerHTML += `<tr class="border-b border-blue-50 text-left"><td class="py-3 pr-2 text-xs font-medium">${name}</td><td class="py-3 text-center font-bold text-blue-600">${item.quantity}</td><td class="py-3 text-right font-bold">$${item.price * item.quantity}</td></tr>`;
            });
            emptyMsg.classList.toggle('hidden', Object.keys(cart).length > 0);
            document.getElementById('total-price').innerText = total;
            document.getElementById('cart-count').innerText = count;
        }

        function changeQty(name, delta) {
            cart[name].quantity += delta;
            if (cart[name].quantity <= 0) delete cart[name];
            renderCart();
        }

        async function submitOrder() {
            const userName = document.getElementById('user-name').value;
            const wishText = document.getElementById('wish-list').value;
            if (!userName) return alert('è«‹è¼¸å…¥å§“å');
            
            const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSf9o59aGHM1f14UMWh5rGNbnm6bvW7wSjqdXluTuEWz8UyT7Q/formResponse";
            const formData = new FormData();
            formData.append("entry.556831663", userName);
            formData.append("entry.1107950279", document.getElementById('total-price').innerText);
            formData.append("entry.1866153268", wishText || "");

            // æ”¹é€²ç™¼é€é‚è¼¯ï¼šå¦‚æœæ²’è²·ï¼Œå°±å‚³é€ç©ºå­—ä¸²ï¼ˆç•¥éï¼‰ï¼Œæ¸›å°‘é©—è­‰é¢¨éšª
            products.forEach(p => {
                const qty = cart[p.name] ? cart[p.name].quantity : ""; 
                formData.append(p.entryId, String(qty));
            });

            try {
                fetch(formURL, { method: "POST", mode: "no-cors", body: formData });
                alert('ğŸ‰ è¨‚å–®å·²é€å‡ºï¼');
                cart = {};
                document.getElementById('user-name').value = '';
                document.getElementById('wish-list').value = '';
                renderCart();
            } catch (e) {
                alert('å‚³é€å¤±æ•—');
            }
        }

        initProducts();
    </script>
</body>
</html>
