<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬è©¦äºŒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-5">

    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden p-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">ğŸ›’ ç²¾é¸å•†åº—</h1>

        <h2 class="text-xl font-semibold mb-4 text-gray-700 border-l-4 border-blue-500 pl-2">å•†å“é¸è³¼</h2>
        <div id="product-list" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
        </div>

        <div class="bg-blue-50 p-5 rounded-xl border border-blue-100 shadow-inner">
            <h2 class="text-xl font-semibold mb-4 text-blue-800 flex justify-between">
                <span>æ‚¨çš„è³¼ç‰©æ¸…å–®</span>
                <span id="cart-count" class="text-sm bg-blue-500 text-white px-2 py-1 rounded-full">0</span>
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm">
                    <thead>
                        <tr class="border-b border-blue-200">
                            <th class="py-2">å•†å“</th>
                            <th class="py-2">å–®åƒ¹</th>
                            <th class="py-2 text-center">æ•¸é‡</th>
                            <th class="py-2 text-right">å°è¨ˆ</th>
                        </tr>
                    </thead>
                    <tbody id="cart-table-body">
                    </tbody>
                </table>
            </div>
            <div id="empty-msg" class="text-center py-4 text-gray-400">è³¼ç‰©è»Šå…§å°šç„¡å•†å“</div>

            <div class="flex justify-between items-center pt-4 border-t border-blue-200 mt-4">
                <span class="text-lg font-bold text-gray-800">æ‡‰ä»˜ç¸½é¡ï¼š</span>
                <span class="text-2xl font-bold text-red-600">$<span id="total-price">0</span></span>
            </div>
        </div>

        <div class="mt-8 border-t pt-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">æ”¶ä»¶äººå§“å</label>
            <input type="text" id="user-name" placeholder="è«‹è¼¸å…¥å§“å"
                class="w-full border p-3 rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none shadow-sm">
            <button onclick="submitOrder()"
                class="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl hover:bg-indigo-700 transition-all shadow-lg text-lg">
                ç¢ºèªé€å‡ºè¨‚å–®
            </button>
        </div>
    </div>

    <script>
        // 1. å•†å“è³‡æ–™è¨­å®š (è«‹ç¢ºä¿åç¨±èˆ‡æ‚¨è¡¨å–®ä¸­çš„é †åºä¸€è‡´)
        const products = [
            { name: 'èœ‚è† å™´éœ§ propoliz mouth spray', price: 50, entryId: 'entry.926724098' },
            { name: 'è›‡ç‰Œå™´éœ§ ç«ç‘° à¸•à¸£à¸²à¸‡à¸¹ à¸›à¸£à¸´à¸à¸¥à¸µà¹ˆà¸®à¸µà¸— à¸„à¸¹à¸¥à¸¥à¸´à¹ˆà¸‡ à¸¡à¸´à¸ªà¸—à¹Œ à¸„à¸¥à¸²à¸ªà¸ªà¸´à¸', price: 50, entryId: 'entry.417431954' },
            { name: 'é˜²èšŠæ¶² æŸ‘æ©˜ à¸‹à¸­à¸Ÿà¹€à¸Ÿà¸¥ à¸ªà¹€à¸›à¸£à¸¢à¹Œà¸à¸±à¸™à¸¢à¸¸à¸‡ à¸à¸¥à¸´à¹ˆà¸™à¹€à¸Ÿà¸£à¸Š', price: 50, entryId: 'entry.1801961741' },
            { name: 'å¤©éµç‰Œé¼»é€š', price: 50, entryId: 'entry.2054506168' },
            { name: 'poysiam é¼»é€š å¸é¼»åŠ‘å…­å…¥ à¸¢à¸²à¸”à¸¡ 6 à¸‹à¸­à¸‡', price: 50, entryId: 'entry.1479087386' },
            { name: 'LISA è—ç½é¼»é€š', price: 50, entryId: 'entry.676572391' },
            { name: 'é˜¿å©†é¦™çš‚MADAME HENG (èˆˆå¤ªå¤ª)é¦™çš‚ åŸå‘³ à¹€à¸¡à¸­à¸£à¸µà¹ˆà¹€à¸šà¸¥à¸¥à¹Œ à¸ªà¸šà¸¹à¹ˆà¸ªà¸¡à¸¸à¸™à¹„à¸à¸£', price: 50, entryId: 'entry.126626699' },
            { name: 'é˜¿å©†é¦™çš‚MADAME HENG(èˆˆå¤ªå¤ª)é¦™çš‚ è–„è· à¸¡à¸²à¸”à¸²à¸¡à¹€à¸®à¸‡ à¸ªà¸šà¸¹à¹ˆà¸¡à¸´à¹‰à¸™à¸—à¹Œà¹à¸„à¸£à¹Œà¸ªà¸›à¸²', price: 50, entryId: 'entry.659010215' },
            { name: 'é˜¿å©†é¦™çš‚MADAME HENG(èˆˆå¤ªå¤ª)é¦™çš‚ ç«ç‘° à¸¡à¸²à¸”à¸²à¸¡à¹€à¸®à¸‡ à¸ªà¸šà¸¹à¹ˆà¸à¸¸à¸«à¸¥à¸²à¸šà¹à¸„à¸£à¹Œà¸ªà¸›à¸²', price: 50, entryId: 'entry.1408326793' },
            { name: 'é˜¿å©†é¦™çš‚MADAME HENG(èˆˆå¤ªå¤ª)é¦™çš‚ æª€é¦™ à¸ªà¸šà¸¹à¹ˆà¸¡à¸²à¸”à¸²à¸¡à¹€à¸®à¸‡ à¸ªà¸šà¸¹à¹ˆà¹„à¸¡à¹‰à¸«à¸­à¸¡ à¹à¸„à¸£à¹Œà¸ªà¸›à¸²', price: 50, entryId: 'entry.1550879825' },
            { name: 'èšŠèŸ²å®å’¬ é ­ç—›ç”¨ æ¶¼æ¶¼è†  à¹„à¸­à¸‹à¹Œ à¹€à¸ˆà¸¥à¸¥à¸´à¸šà¸²à¸¥à¹Œà¸¡ à¸¢à¸²à¸”à¸¡à¸à¸£à¹‰à¸­à¸¡à¸—à¸²à¸ªà¸¹à¸•à¸£à¹€à¸ˆà¸¥', price: 50, entryId: 'entry.647340521' },
            { name: 'ZAM-BUK é’è‰è† 18g à¹à¸‹à¸¡-à¸šà¸±à¸„ à¹€à¸­à¸Šà¸­à¸²à¸£à¹Œ ', price: 50, entryId: 'entry.1380787522' },
            { name: 'å·´é»èŠé›… ä¿æ¿•æ¸…æ–°é˜²æ›¬ (æ³°åœ‹ç¨å®¶ç‰ˆ) à¸¥à¸­à¸£à¸µà¸­à¸±à¸¥ à¸›à¸²à¸£à¸µà¸ª à¸¢à¸¹à¸§à¸µ à¸”à¸µà¹€à¸Ÿà¸™à¹€à¸”à¸­à¸£à¹Œ à¹à¸¡à¸—à¸—à¹Œ à¹à¸­à¸™à¸”à¹Œ à¹€à¸Ÿà¸£à¸Š', price: 50, entryId: 'entry.1739351714' },
            { name: 'é‚„é­‚æ¢… à¸šà¹Šà¸§à¸¢à¸„à¸·à¸™à¸Šà¸µà¸', price: 50, entryId: 'entry.2134589659' },
            { name: 'é­·é­šç‰‡èŠ±æè„†ç‰‡é»ƒè‰²åŒ…è£18g à¹€à¸šà¸™à¹‚à¸•à¸° à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸à¸­à¸š à¸£à¸ªà¸¥à¸²à¸š', price: 50, entryId: 'entry.41530697' },
            { name: 'é­·é­šç‰‡éº»è¾¦ç´…è‰²åŒ…è£ 18g à¹€à¸šà¸™à¹‚à¸•à¸° à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸à¸­à¸š à¸£à¸ªà¸¥à¸²à¸š', price: 50, entryId: 'entry.1218966055' },
            { name: 'é­·é­šç‰‡è’œå‘³è—è‰²åŒ…è£18g à¹€à¸šà¸™à¹‚à¸•à¸° à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸à¸­à¸š à¸£à¸ªà¸¥à¸²à¸š', price: 50, entryId: 'entry.1796287054' },
            { name: 'é­·é­šç‰‡æ¡”è‰²åŒ…è£18g à¹€à¸šà¸™à¹‚à¸•à¸° à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸à¸­à¸š à¸£à¸ªà¸¥à¸²à¸š', price: 50, entryId: 'entry.660240471' },
            { name: 'èŠ’æœè»Ÿç³– 200g Gummy Mangoes MAX', price: 50, entryId: 'entry.445090895' },
            { name: 'èŠ’æœä¹¾ 200g à¸¡à¸°à¸¡à¹ˆà¸§à¸‡à¹à¸à¹‰à¸§à¸‚à¸¡à¸´à¹‰à¸™', price: 50, entryId: 'entry.2103707388' },
            { name: 'èŠ­æ¨‚ä¹¾ 200g à¸à¸£à¸±à¹ˆà¸‡à¸à¸´à¸¡à¸ˆà¸¹à¸­à¸šà¹à¸«à¹‰à¸‡', price: 50, entryId: 'entry.1290561039' },
            { name: 'JIRAPORN é¦™è•‰è„†ç‰‡ 80g à¸à¸¥à¹‰à¸§à¸¢à¸­à¸šà¹€à¸™à¸¢', price: 50, entryId: 'entry.1912146295' },
            { name: 'JIRAPORN é¦™è•‰è„†ç‰‡ 80g à¸à¸¥à¹‰à¸§à¸¢à¸­à¸šà¹€à¸™à¸¢', price: 50, entryId: 'entry.478490252' },
            { name: 'çš‡å®¶ç‰Œä¹³ç‰‡', price: 50, entryId: 'entry.1599520756' },
            { name: 'å¥¶æ²¹å°ç†Šé¤…å¹²æ³°å¥¶', price: 50, entryId: 'entry.679036260' },
            { name: 'é›™é¾ç‰Œèˆ¹éºµ(å†¬ç²‰-æ¹¯) à¸¡à¸±à¸‡à¸à¸£à¸„à¸¹à¹ˆ à¹€à¸£à¸”à¸”à¸µà¹‰ à¸§à¸¸à¹‰à¸™à¹€à¸ªà¹‰à¸™ à¸£à¸ªà¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§à¹€à¸£à¸·à¸­', price: 50, entryId: 'entry.553616762' },
            { name: 'é›™é¾ç‰Œèˆ¹éºµ(ç´°ç²¿æ¢-æ¹¯) à¸¡à¸±à¸‡à¸à¸£à¸„à¸¹à¹ˆ à¹€à¸£à¸”à¸”à¸µà¹‰ à¹€à¸ªà¹‰à¸™à¹€à¸¥à¹‡à¸ à¸£à¸ªà¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§à¹€à¸£à¸·à¸­', price: 50, entryId: 'entry.551884674' },
            { name: 'é›™é¾ç‰Œèˆ¹éºµ(ç´°ç²¿æ¢-ä¹¾) à¸¡à¸±à¸¡à¸±à¸‡à¸à¸£à¸„à¸¹à¹ˆ à¹€à¸£à¸”à¸”à¸µà¹‰ à¹€à¸ªà¹‰à¸™à¹€à¸¥à¹‡à¸à¹à¸‹à¹ˆà¸šà¹à¸«à¹‰à¸‡', price: 50, entryId: 'entry.2136513928' },
            { name: 'MAMAèˆ¹éºµ(ç´°ç²¿æ¢-æ¹¯) à¸¡à¸²à¸¡à¹ˆà¸² à¹€à¸ªà¹‰à¸™à¹€à¸¥à¹‡à¸ à¸£à¸ªà¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§à¹€à¸£à¸·à¸­à¸‹à¸­à¸ªà¹€à¸œà¹‡à¸”', price: 50, entryId: 'entry.2032416106' },
            { name: 'å°è€é—†åŸå‘³æµ·è‹” à¹€à¸–à¹‰à¸²à¹à¸à¹ˆà¸™à¹‰à¸­à¸¢à¸šà¸´à¹Šà¸à¸Šà¸µà¸—à¸„à¸¥à¸²à¸ªà¸ªà¸´à¸„', price: 50, entryId: 'entry.1157756056' },
            { name: 'å°è€é—†è¾£å‘³æµ·è‹” à¹€à¸–à¹‰à¸²à¹à¸à¹ˆà¸™à¹‰à¸­à¸¢à¸šà¸´à¹Šà¸à¸Šà¸µà¸—à¸ªà¸²à¸«à¸£à¹ˆà¸²à¸¢à¹€à¸œà¹‡à¸”à¸ˆà¸µà¹Šà¸”', price: 50, entryId: 'entry.1425148067' },
            { name: 'å°è€é—†å†¬é™°åŠŸæµ·è‹”ç´„ à¹€à¸–à¹‰à¸²à¹à¸à¹ˆà¸™à¹‰à¸­à¸¢à¸ªà¸²à¸«à¸£à¹ˆà¸²à¸¢à¸—à¸­à¸”à¸£à¸ªà¸•à¹‰à¸¡à¸¢à¸³à¸¡à¸±à¸™à¸à¸¸à¹‰à¸‡', price: 50, entryId: 'entry.742162343' },
            { name: 'è‡˜è…¸ç‹—ç›²ç›’æ–°å¹´æ¬¾', price: 50, entryId: 'entry.895757770' }
        ];

        let cart = {};

        function initProducts() {
            const container = document.getElementById('product-list');
            container.innerHTML = ''; // æ¸…ç©ºé¿å…é‡è¤‡ç”Ÿæˆ
            products.forEach(p => {
                container.innerHTML += `
                <div class="flex items-center space-x-4 bg-white p-3 border rounded-xl shadow-sm hover:shadow-md transition text-left">
                    <img src="${p.img}" alt="${p.name}" class="w-20 h-20 object-cover rounded-lg bg-gray-100">
                    <div class="flex-1">
                        <h3 class="font-bold text-gray-800">${p.name}</h3>
                        <p class="text-red-500 font-medium">$${p.price}</p>
                        <button onclick="addToCart('${p.name}', ${p.price})" 
                                class="mt-2 bg-blue-100 text-blue-600 px-3 py-1 rounded-md text-sm font-bold hover:bg-blue-200 transition">
                            + åŠ å…¥è³¼ç‰©è»Š
                        </button>
                    </div>
                </div>
            `;
            });
        }

        function addToCart(name, price) {
            if (cart[name]) {
                cart[name].quantity += 1;
            } else {
                cart[name] = { price: price, quantity: 1 };
            }
            renderCart();
        }

        function renderCart() {
            const tbody = document.getElementById('cart-table-body');
            const emptyMsg = document.getElementById('empty-msg');
            tbody.innerHTML = '';
            let total = 0;
            let count = 0;

            const items = Object.keys(cart);
            if (items.length > 0) {
                emptyMsg.classList.add('hidden');
                items.forEach(name => {
                    const item = cart[name];
                    const subtotal = item.price * item.quantity;
                    total += subtotal;
                    count += item.quantity;
                    tbody.innerHTML += `
                    <tr class="border-b border-blue-50">
                        <td class="py-3">${name}</td>
                        <td class="py-3">$${item.price}</td>
                        <td class="py-3 text-center">
                            <div class="flex items-center justify-center space-x-2">
                                <button onclick="changeQty('${name}', -1)" class="px-2 bg-gray-200 rounded hover:bg-gray-300">-</button>
                                <span class="font-bold w-4">${item.quantity}</span>
                                <button onclick="changeQty('${name}', 1)" class="px-2 bg-gray-200 rounded hover:bg-gray-300">+</button>
                            </div>
                        </td>
                        <td class="py-3 text-right font-medium">$${subtotal}</td>
                    </tr>
                `;
                });
            } else {
                emptyMsg.classList.remove('hidden');
            }

            document.getElementById('total-price').innerText = total;
            document.getElementById('cart-count').innerText = count;
        }

        function changeQty(name, delta) {
            cart[name].quantity += delta;
            if (cart[name].quantity <= 0) delete cart[name];
            renderCart();
        }

        // [10.4] æ ¸å¿ƒæ›´æ–°ï¼šåˆ†æ¬„ä½é€å‡ºè³‡æ–™
        // 2. çµå¸³å‡½å¼
        async function submitOrder() {
            const userName = document.getElementById('user-name').value;
            if (!userName) return alert('è«‹è¼¸å…¥å§“å');
            if (Object.keys(cart).length === 0) return alert('è³¼ç‰©è»Šæ˜¯ç©ºçš„');

            const total = document.getElementById('total-price').innerText;
            const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSf9o59aGHM1f14UMWh5rGNbnm6bvW7wSjqdXluTuEWz8UyT7Q/formResponse";
            const formData = new FormData();

            // åŸºæœ¬è³‡æ–™
            formData.append("entry.556831663", userName);
            formData.append("entry.1107950279", total);

            // è‡ªå‹•å¾ªç’°æ‰€æœ‰å•†å“ä¸¦å¡«å…¥å°æ‡‰ ID æ•¸é‡
            products.forEach(p => {
                const qty = cart[p.name] ? cart[p.name].quantity : 0;
                formData.append(p.entryId, qty);
            });

            try {
                await fetch(formURL, { method: "POST", mode: "no-cors", body: formData });
                alert('ğŸ‰ è¨‚å–®å·²æˆåŠŸé€å‡ºï¼');
                cart = {};
                document.getElementById('user-name').value = '';
                renderCart();
            } catch (e) {
                alert('å‚³é€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
            }
        }

        initProducts();
    </script>
</body>

</html>
